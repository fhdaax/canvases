function random(t,s){return Math.floor(Math.random()*(s-t+1)+t)}function clearcanvas(){ctx.clearRect(0,0,w,h)}function getCords(t){var s=canvas.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}}function createShapes(t,s){this.x=t||random(0,w),this.y=s||random(0,h),this.speed=opt.speed,this.vx=Math.cos(random(0,360))*this.speed,this.vy=Math.sin(random(0,360))*this.speed,this.r=opt.radius,this.color=opt.shapecolor,this.opacity=opt.circleopacity,this.draw=function(){ctx.beginPath(),ctx.globalCompositeOperation="source-over",ctx.globalAlpha=this.opacity,ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!1),ctx.closePath(),ctx.fillStyle=this.color,ctx.fill()},this.move=function(){this.x+=this.vx,this.y+=this.vy,(this.x>=w||this.x<=0)&&(this.vx*=-1),(this.y>=h||this.y<=0)&&(this.vy*=-1),this.x>w?this.x=w:this.x,this.y>h?this.y=h:this.y,this.x<0?this.x=0:this.x,this.y<0?this.y=0:this.y}}function check(t,s){for(var e=0;e<s.length;e++){var i=t.y-s[e].y,a=t.x-s[e].x,n=Math.sqrt(a*a+i*i);n<opt.distance&&(ctx.beginPath(),ctx.globalAlpha=1-n/opt.distance,ctx.globalCompositeOperation="destination-over",ctx.lineWidth=1,ctx.moveTo(t.x,t.y),ctx.lineTo(s[e].x,s[e].y),ctx.strokeStyle=opt.shapecolor,ctx.lineCap="round",ctx.closePath(),ctx.stroke())}}function loop(){clearcanvas(),shapes[0].x=staticXpos,shapes[0].y=staticYpos,shapes[0].move(),shapes[0].draw();for(var t=1;t<shapes.length;t++)shapes[t].move(),shapes[t].draw(),check(shapes[t],shapes);window.requestAnimationFrame(loop)}function init(){for(var t=0;t<num;t++)shapes.push(new createShapes);window.requestAnimationFrame(loop)}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),shapes=[],num=50,staticXpos,staticYpos,opt={shapecolor:"#666",radius:2,distance:200,circleopacity:1,speed:.5},w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight;addEventListener("resize",function(){w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight}),canvas.addEventListener("mousemove",function(t){var s=getCords(t);staticXpos=s.x,staticYpos=s.y}),canvas.addEventListener("click",function(t){var s=getCords(t);shapes.push(new createShapes(s.x,s.y))}),canvas.addEventListener("contextmenu",function(t){t.preventDefault(),shapes.splice(shapes.length-1,1)}),init();